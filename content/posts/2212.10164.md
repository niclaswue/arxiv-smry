---
title: "Multi-asset market making under the quadratic rough Heston"
date: 2022-12-20T11:07:54.000Z
author: "Mathieu Rosenbaum, Jianfei Zhang"
weight: 2
showToc: true
TocOpen: true
draft: false
hidemeta: false
comments: false
description: "Important disclaimer: the following content is AI-generated, please make sure to fact check the presented information by reading the full paper."
disableHLJS: true # to disable highlightjs
disableShare: false
hideSummary: false
searchHidden: false
ShowReadingTime: false
ShowBreadCrumbs: false
ShowPostNavLinks: false
ShowWordCount: true
ShowRssButtonInSectionTermList: false
UseHugoToc: false
cover:
    image: "thumbnails/2212-10164v1.webp" # image path/url
    alt: "Multi-asset market making under the quadratic rough Heston" # alt text
    caption: "The full paper is available [here](https://arxiv.org/abs/2212.10164)." # display caption under cover
    relative: false # when using page bundles set this to true
    hidden: false # only hide on current single page
---

# Link to paper
The full paper is available [here](https://arxiv.org/abs/2212.10164).

You can also find the paper on PapersWithCode [here](https://paperswithcode.com/paper/multi-asset-market-making-under-the-quadratic).

# Abstract
- The quadratic rough Heston model has been successful in predicting the smiles of the S&P 500 and VIX
- The market maker tries to maximize its profit from spread capturing while controlling the portfolio's inventory risk
- The high dimensionality of the problem is relaxed by several approximations

# Paper Content

## Introduction
- The volatility assumption in the Black-Scholes model is not consistent with empirical observations.
- Tackling this issue by regarding the volatility as a continuous-time random process, stochastic volatility models are able to reproduce several stylized facts of historical data.
- However, the shapes of the implied volatility surfaces generated by conventional stochastic volatility models, such as the Hull and White, Heston, and SABR models, usually differ substantially from those of empirical observations.
- The rough volatility paradigm brings new solutions, being able to achieve superior fits of implied volatility surfaces than the former models.
- The recently introduced quadratic rough Heston (QRH) model shows its potential in calibrating jointly SPX and VIX smiles.
- It models the price of an asset S (here the SPX) and its spot variance V under risk-neutral measure as where W is a Brownian motion, a, b, c are all positive constants and Z t is defined as where α ∈ (1/2, 1), λ > 0, η > 0, and θ 0 (•) is a deterministic function.
- The fractional kernel enables us to generate rough volatility dynamics.
- It is also used in the rough Heston model, under which the volatility trajectories have almost surely Hölder regularity α − 1/2 − ε, for any ε > 0.
- Importantly, the QRH model gives a natural way to encode the strong Zumbach effect.
- While this is quite different from conventional settings, where volatility is exposed to additional random factors, satisfactory results on market data are reported in [17,28].
- It is also emphasized in [24] that price returns largely explain volatility.
- An extensive empirical study on the formation process of realized volatility is presented in [29], where the predictive power of price returns on future realized volatility is underlined.
- The QRH model gives opportunities to model consistently SPX derivatives, including VIX futures, SPX and VIX options.
- Today these assets are actively traded and most of the volume comes from electronic trading platforms based on limit order books, which justifies the relevance of developing automated market making algorithms.
- The academic literature on optimal market making dates back to the 80s.
- In [25], the challenge faced by a market maker, which consists in maximizing its profit from spread capturing with a particular focus on execution uncertainty and inventory risk, is formulated as a dynamic programming problem.
- Approximate solutions are given for specific functional forms of the order arrival rates.
- The approach is revived in the seminal work [2] with tools of stochastic optimal control.
- Since then, an extensive literature on optimal market making has been developed.
- It is shown in [20] that under inventory constraints, the Hamilton-Jacobi-Bellman (HJB) equations associated with the control problem of [2] can be reduced to a linear system of ordinary differential equations (ODEs), for which the asymptotic of the closed-form solution are given when the considered time horizon tends to infinity.
- Various features, such as model misspecification, short-term alpha signals, and microstructural characteristics, are investigated in [8,10,11].
- In [19], the results in [20] are extended to more general order execution rates and the two aforementioned objective functions are reconciled.
- It is shown that the HJB equations associated with the two classes of objective functions can be sorted out into the same family of ODEs.
- Multi-asset market making problems are usually exposed to the curse of dimensionality.
- The conventional grid methods typically used in the case of single-asset become inadmissible given...

### Multi-factor approximation of the QRH model
- Inspired by [1], a multi-factor approximation of the QRH model is introduced to make the model Markovian.
- Now given the Markovian nature of the approximated version of the model, the price of many derivatives of SPX at time t, e.g. VIX futures, vanilla SPX and VIX options, can be obtained as a function of being the conditional expectation under the risk-neutral measure.
- In [28], the approximation of the pricing mapping P (•) is learned directly from samples generated through Monte-Carlo simulations.
- One can also obtain P (•) through solving the following partial differential equation (PDE): with terminal condition P (T, X) = g(X), where g(•) represents the payoff function of the considered derivative.

### Multi-asset market making
- The first approximation is to consider the value function as a function of only the net inventory risk (κ j = 0, j = 1, • • • , d) of the whole portfolio.
- The second approximation is to consider the value function as a function of only the net inventory risk (κ j = 0, j ∈ {1, • • • , d}).
- The third approximation is to consider the value function as a function of only the bid and ask size (l j,b t and l j,a t ).

### The Hamilton-Jacobi-Bellman equations
- The multidimensional QRH model has a time horizon of T days.
- To reduce the dimensionality coming from the multidimensional nature of the QRH model, we suggest the following approximation: Then we have V t = V 0 for t ∈ [0, T ] by (2.1).
- The approximation is relevant when the time horizon of the problem is relatively short.
- In [28] the effectiveness of daily hedging under the QRH model is illustrated through numerical tests on simulated and market data.
- We give additional daily hedging results in the next section.
- All these examples indicate that it is reasonable to consider δ constant at the daily scale.
- In practice, the market maker can always reset the algorithm with updated parameters in the case of significant market movement.
- We recall that the computation of (δ j 0 ) j=1,...,d and V 0 at the beginning of the day is ruled by the QRH model, see [28] for more details.
- Now the value function satisfies q j s δ j ) 2 ds .
- Now the value function u(•) is transformed to one with (1 + d) variables.
- Following [27], the HJB equation associated with (3.1) is given by a system of ODEs verifying with terminal condition v(T, q) = 0 , where {e j } d j=1 is the canonical basis of R d .
- We can rewrite the terms involving the control variables as In the following we give the results on the existence and uniqueness of a solution of (3.2) with terminal condition (3.3).
- We give the sketch of the proof as it follows the same steps as in [19].
- Therefore, the only reason why there would not be a global solution on [0, T ] is because sup q∈Q v(t, q) blows up at τ > 0.
- By the fact that H j,k is decreasing, a classical comparison principle can be obtained.
- It is clear that v(t, q) = d j=1 (H j,b (0) + H j,a (0) + |µδ j |Q j )(T − t) defines a supersolution of (3.2) with terminal condition (3.3).
- Then by the comparison principle, we have This shows that v is bounded for t ∈ [0, T ], which leads to its existence and uniqueness on [0, T ] × Q.
- By a classical verification argument, we can get the following result: Theorem 3.2. Considering the solution v of Equation (3.2) with terminal condition (3.3), the optimal market making decisions in the problem (3.1) are given by
- Remark 3.1. When the market maker controls only the portfolio's net risk, i.e. ∀j ∈ {1, • • • , d}, κ j = 0 and Q j → +∞, the d-dimensional variable q can be summarized with one variable. More precisely, by introducing the maximum risk bound R > 0 and r t := d j=1 q j t δ j , now the value function θ : (t, r) ∈ [0, T ] × [−R, R] → θ(t, R) associated with the problem can be written as And the associated HJB equation is given by with terminal condition θ(T, r) = 0.

### Quadratic approximation
- The market making problem considered in [6] is more adapted to over-the-counter market, where the optimal control is the quoting price and is taken to be continuous.
- Clearly this do not apply for (3.4).
- In this work we propose the following choice as the approximated Hamiltonian functions: with α j > 0.
- Actually we have Ĥj,k (0) = H j,k (0) and ( Ĥj,k ) (0) = (H j,k ) (0) for any (j, k) ∈ {1, • • • , d} × {a, b}.
- We can choose α j ∼ 1 D j to make Ĥj,• close to H j,• around 0.
- In the case without maximal inventory constraints for individual assets, i.e. Q j = +∞, j ∈ {1, • • • , d}, following the same computations as in [6], the approximation of v associated with ( Ĥj,k ) j∈{1,••• ,d},k∈{a,b} , denoted by v, can be written as a quadratic function of q, i.e. v(t, q) = −q T A(t)q − q T B(t) − C(t) , where A : [0, T ] → S + d , B : [0, T ] → R d and C : [0, T ] → R are given by the unique solution of a system of ODEs.
- Since we are more interested in the behavior of v as T → +∞, we focus mostly on the asymptotic formulas of A and B.
- Let ) + δδ T . We have where Â+ is the Moore-Penrose inverse of Â and D is the linear operator mapping a matrix onto the vector of its diagonal coefficients.
- As we focus on the asymptotic of the approximated solution in the following, we use A, B and v(q) to represent the respective asymptotic formulas for ease of notation.
- As suggested in [6], for any (j, k) ∈ {1, • • • , d} × {a, b}, one important application of v is to make greedy decisions following lj,k * (q) = 1 It is clear that the set {q| lj,k * = 1, q ∈ Q} and {q| lj,k * = 0, q ∈ Q} are separated by an affine hyperplane defined on Q.

### Daily hedging with SPX
- The QRH model is evaluated and found to be relevant
- The idea of using constant δ t during a short period is tested and found to be rational
- High-frequency hedging is not mandatory to obtain satisfactory results

### Example 3
- The author considers a market making problem on six assets
- They test with T b = 2000 seconds, κ varying from 10 −4 to 10 −1 and κ j = κ
- For the uni-asset case, optimal market making is conducted on each individual asset and the final profits are summed.

## Multi-factor approximation of the QRH model
- Inspired by [1], a multi-factor approximation of the QRH model is introduced to make the model Markovian.
- Now given the Markovian nature of the approximated version of the model, the price of many derivatives of SPX at time t, e.g. VIX futures, vanilla SPX and VIX options, can be obtained as a function of being the conditional expectation under the risk-neutral measure.
- In [28], the approximation of the pricing mapping P (•) is learned directly from samples generated through Monte-Carlo simulations.
- One can also obtain P (•) through solving the following partial differential equation (PDE): with terminal condition P (T, X) = g(X), where g(•) represents the payoff function of the considered derivative.

## Multi-asset market making
- The first approximation is to consider the value function as a function of only the net inventory risk (κ j = 0, j = 1, • • • , d) of the whole portfolio.
- The second approximation is to consider the value function as a function of only the net inventory risk (κ j = 0, j ∈ {1, • • • , d}).
- The third approximation is to consider the value function as a function of only the bid and ask size (l j,b t and l j,a t ).

## The Hamilton-Jacobi-Bellman equations
- The multidimensional QRH model has a time horizon of T days.
- To reduce the dimensionality coming from the multidimensional nature of the QRH model, we suggest the following approximation: Then we have V t = V 0 for t ∈ [0, T ] by (2.1).
- The approximation is relevant when the time horizon of the problem is relatively short.
- In [28] the effectiveness of daily hedging under the QRH model is illustrated through numerical tests on simulated and market data.
- We give additional daily hedging results in the next section.
- All these examples indicate that it is reasonable to consider δ constant at the daily scale.
- In practice, the market maker can always reset the algorithm with updated parameters in the case of significant market movement.
- We recall that the computation of (δ j 0 ) j=1,...,d and V 0 at the beginning of the day is ruled by the QRH model, see [28] for more details.
- Now the value function satisfies q j s δ j ) 2 ds .
- Now the value function u(•) is transformed to one with (1 + d) variables.
- Following [27], the HJB equation associated with (3.1) is given by a system of ODEs verifying with terminal condition v(T, q) = 0 , where {e j } d j=1 is the canonical basis of R d .
- We can rewrite the terms involving the control variables as In the following we give the results on the existence and uniqueness of a solution of (3.2) with terminal condition (3.3).
- We give the sketch of the proof as it follows the same steps as in [19].
- Therefore, the only reason why there would not be a global solution on [0, T ] is because sup q∈Q v(t, q) blows up at τ > 0.
- By the fact that H j,k is decreasing, a classical comparison principle can be obtained.
- It is clear that v(t, q) = d j=1 (H j,b (0) + H j,a (0) + |µδ j |Q j )(T − t) defines a supersolution of (3.2) with terminal condition (3.3).
- Then by the comparison principle, we have This shows that v is bounded for t ∈ [0, T ], which leads to its existence and uniqueness on [0, T ] × Q.
- By a classical verification argument, we can get the following result: Theorem 3.2. Considering the solution v of Equation (3.2) with terminal condition (3.3), the optimal market making decisions in the problem (3.1) are given by
- Remark 3.1. When the market maker controls only the portfolio's net risk, i.e. ∀j ∈ {1, • • • , d}, κ j = 0 and Q j → +∞, the d-dimensional variable q can be summarized with one variable. More precisely, by introducing the maximum risk bound R > 0 and r t := d j=1 q j t δ j , now the value function θ : (t, r) ∈ [0, T ] × [−R, R] → θ(t, R) associated with the problem can be written as And the associated HJB equation is given by with terminal condition θ(T, r) = 0.

## Quadratic approximation
- Equation (3.2) becomes intricate to solve with classical numerical methods
- We follow the idea of [6] and approximate the Hamiltonian functions with quadratic ones
- Closed-form solution can be obtained for the new HJB equation
- Asymptotic of the solution can be derived, which are helpful for practical use

## Daily hedging with SPX
- The QRH model is evaluated and found to be relevant
- The idea of using constant δ t during a short period is tested and found to be rational
- High-frequency hedging is not mandatory to obtain satisfactory results

## Market making approximation

## Example 1
- The proposed quadratic approximation is effective in approximating the true value function for market making decisions.
- The approximation is effective for a range of risk aversion preferences.
- The approximation is effective for a range of inventory penalization parameters.

## Example 2
- The experiment is repeated for the case where only the portfolio's net inventory risk is controlled
- The value function θ is solved with classical Euler scheme based on grids
- The approximation method is very stable through time and the results are very close to the original solution
- Varying κ from 10-4 to 1 results in a mean-risk profile that is very close to the original solution

## Example 3
- The author considers a market making problem on six assets
- They test with T b = 2000 seconds, κ varying from 10 −4 to 10 −1 and κ j = κ
- For the uni-asset case, optimal market making is conducted on each individual asset and the final profits are summed.
